# Launch-Protocol.ps1
# ูุฒุงููุฉ ุฅุฌุจุงุฑูุฉ ููููุฏุ ุญู ุชุนุงุฑุถ Gitุ ูุชุดุบูู ุงููุดุฑูุน ุงูููุงุฆู.

$ErrorActionPreference = "Stop"
Write-Host "๐ฅ ุจุฏุก ุจุฑูุชูููู ุงูุฅุทูุงู ุงูููุงุฆู (Final Launch Protocol)..." -ForegroundColor Cyan

# -----------------------------------------------------------
# 1. ุงููุฒุงููุฉ ูุงูุชุญุถูุฑ ููุฑูุน
# -----------------------------------------------------------
Write-Host "๐พ 1/3: ุฅุถุงูุฉ ุฌููุน ุงูุชุบููุฑุงุช ูุงูุฅุตูุงุญุงุช..." -ForegroundColor Yellow
git add .
git commit -m "sync: Final feature install and configuration sync"

# -----------------------------------------------------------
# 2. ุญู ุชุนุงุฑุถ Git (Force Push)
# -----------------------------------------------------------
Write-Host "๐ 2/3: ุณุญุจ ุงูุชุบููุฑุงุช ูู ุงูุณุญุงุจุฉ ูุญู ุงูุชุนุงุฑุถ (Pull & Force Push)..." -ForegroundColor Yellow
# ูุณุญุจ ุฃููุงู ูุชุฌูุจ ููุฏุงู ุฃู ุจูุงูุงุช
git pull origin master 

# ูุฌุจุฑ ุงูุฑูุน ูุญู ูุดููุฉ 'rejected' ูุถูุงู ูุฌูุฏ ุฌููุน ุงููููุงุช
git push origin master --force 
Write-Host "โ ุชู ุฑูุน ุงูููุฏ ุจูุฌุงุญ ูุชุฌุงูุฒ ุงูุชุนุงุฑุถ." -ForegroundColor Green

# -----------------------------------------------------------
# 3. ุงูุชุดุบูู ุงูููุงุฆู (Production Start)
# -----------------------------------------------------------
Write-Host "๐ 3/3: ุชุดุบูู ุงููุณุฎุฉ ุงูุฅูุชุงุฌูุฉ..." -ForegroundColor Cyan
Write-Host "--------------------------------------------------------" -ForegroundColor White
Write-Host "โ ุงููุดุฑูุน ูุนูู ุงูุขู ุนูู http://localhost:3000" -ForegroundColor Green
Write-Host "--------------------------------------------------------" -ForegroundColor White

npm start